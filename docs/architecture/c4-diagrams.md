# C4 Architecture

## 1. Context диаграмма

![Context диаграмма](/docs/architecture/context_diagram.png)

## 2. Container диаграмма

![Container диаграмма](/docs/architecture/container_diagram.png)

## 3. Выбор и обоснование технологий

## Frontend

| Технология                 | Назначение                       | Обоснование                                                                                        |
| -------------------------- | -------------------------------- | -------------------------------------------------------------------------------------------------- |
| Vue.js 3 (Composition API) | Реализация SPA-интерфейса        | Современный, лёгкий и реактивный фреймворк, обеспечивающий высокую скорость и простоту разработки. |
| Pinia                      | Управление состоянием приложения | Более современная и удобная альтернатива Vuex для централизованного хранения данных.               |
| Vue Router                 | Маршрутизация внутри приложения  | Обеспечивает навигацию между страницами (главная, профиль, подарки, напоминания и т.д.).           |
| Axios                      | Взаимодействие с Backend API     | Простая реализация HTTP-запросов, поддержка interceptors для токенов.                              |

## Backend

| Технология             | Назначение                                 | Обоснование                                                                  |
| ---------------------- | ------------------------------------------ | ---------------------------------------------------------------------------- |
| **Node.js (Express)**  | Реализация REST API                        | Высокопроизводительная среда с неблокирующей архитектурой ввода-вывода.      |
| **TypeScript**         | Строгая типизация серверной логики         | Повышает надёжность, упрощает масштабирование и поддержку проекта.           |
| **JWT (jsonwebtoken)** | Авторизация пользователей                  | Обеспечивает безопасную аутентификацию и контроль доступа к ресурсам.        |
| **bcrypt**             | Хэширование паролей                        | Гарантирует безопасность пользовательских данных при хранении в базе.        |
| **cookie-parser**      | Работа с cookie                            | Используется для обработки refresh-токенов и пользовательских сессий.        |
| **cors**               | Разрешение кросс-доменных запросов         | Позволяет безопасно обращаться к API с фронтенда.                            |
| **dotenv**             | Управление конфигурацией окружения         | Позволяет хранить пароли и ключи в `.env` файле без включения в репозиторий. |
| **zod**                | Валидация данных                           | Проверяет корректность данных на сервере, предотвращая ошибки и атаки.       |
| **nodemon**            | Автоперезапуск сервера при изменениях      | Ускоряет процесс разработки и тестирования.                                  |
| **ts-node**            | Запуск TypeScript без компиляции           | Позволяет быстро тестировать код и сценарии.                                 |
| **Multer**             | Работа с файлами (например, фото подарков) | Простая обработка загрузок изображений и медиафайлов на сервер.              |
| **Node-cron**          | Планировщик задач                          | Отправка напоминаний и уведомлений пользователям в заданное время.           |

### Database

| Технология     | Назначение                       | Обоснование                                                                                                     |
| -------------- | -------------------------------- | --------------------------------------------------------------------------------------------------------------- |
| **PostgreSQL** | Основная реляционная база данных | Поддержка связей, транзакций, индексов; высокая надёжность и гибкость в хранении структурированных данных.      |
| **Redis**      | Кэш и хранилище сессий           | Используется для ускорения запросов, хранения токенов и управления напоминаниями в реальном времени.            |
| **ChromaDB**   | Векторное хранилище              | Применяется для контекстного поиска и генерации рекомендаций подарков на основе похожих запросов пользователей. |

### Внешние интеграции

| Сервис               | Назначение                                         | Обоснование                                                                           |
| -------------------- | -------------------------------------------------- | ------------------------------------------------------------------------------------- |
| **Telegram API**     | Отправка уведомлений и уведомлений поддтверждения  | Удобный и привычный пользователям канал связи для уведомлений и поддтверждения.       |
| **Telegram Spy Bot** | Сервис для получения контекста для подбора подарка | Способ позволяющий улычшить подбор подарка и повышающий вероятность успешного подбора |
