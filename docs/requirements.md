# Technical Requirements

## 1. Анализ Use Cases

На основании диаграммы вариантов использования выделены следующие функциональные сценарии приложения:

### Аутентификация

- Регистрация нового пользователя.
- Авторизация существующего пользователя.
- Восстановление пароля с подтверждением по email.
- Удаление аккаунта.
- Переход в профиль пользователя.
- Редактирование профиля с возможностью изменения имени, фамилии, пола, даты рождения, описания и ссылки на Telegram.
- Отмена редактирования профиля.

### Работа с чатами

- Создание нового чата.
- Поиск по чатам.
- Открытие выбранного чата.
- Просмотр истории сообщений.
- Редактирование названия чата.
- Удаление чата.

### Взаимодействие с системой рекомендаций

- Ввод запроса для авторизованных и неавторизованных пользователей.
- Заполнение формы уточняющих данных (пол, возраст, описание, ссылка на пользователя).
- Получение текстового ответа с предложениями подарков.
- Возможность копировать ответ, перейти по предложенной ссылке и оценить качество результата.

### Напоминания

- Переход в календарь.
- Выбор даты для создания напоминания.
- Создание нового напоминания.
- Просмотр существующих напоминаний.
- Редактирование или удаление напоминания.
- Отмена редактирования.
- Заполнение полей: название события, описание, получатель и дата.

---

## 2. Технические требования

### Функциональные требования

1. **Регистрация и вход**

   - Система должна поддерживать регистрацию с подтверждением по email.
   - При авторизации пользователь получает JWT-токен для дальнейшей работы.

2. **Редактирование профиля**

   - Пользователь может изменять личные данные, включая имя, фамилию, пол, дату рождения и описание.
   - Обновление данных выполняется через `PUT /users`.

3. **Работа с чатами**

   - Пользователь может создавать, редактировать и удалять чаты.
   - Просмотр истории сообщений должен быть возможен в любой момент.
   - Запросы реализуются через REST API:
     - `GET /chats` — список чатов.
     - `POST /chats` — создание нового чата.
     - `DELETE /chats/{id}` — удаление чата.

4. **Обработка запросов пользователей**

   - Неавторизованные пользователи могут вводить запросы в ограниченном режиме.
   - Авторизованные пользователи получают персонализированные ответы.
   - Результаты возвращаются в виде текстового ответа, включающего ссылки на подарки.

5. **Работа с напоминаниями**

   - Пользователь может добавлять, редактировать и удалять напоминания.
   - Данные сохраняются в базе и синхронизируются с календарём.
   - API:
     - `POST /reminders` — создание напоминания.
     - `PUT /reminders/{id}` — редактирование.
     - `DELETE /reminders/{id}` — удаление.
     - `GET /reminders` — получение списка.

6. **Поиск и фильтрация**
   - Реализуется поиск по чатам и напоминаниям.
   - Система должна обеспечивать сортировку по дате, названию и активности.

### Нефункциональные требования

- Поддержка высокой доступности (uptime ≥ 99%).
- Минимальное время отклика API — до 1 секунды.
- Возможность горизонтального масштабирования.
- Безопасность данных (шифрование токенов, HTTPS).
- Система должна работать на Windows, macOS и мобильных устройствах.
- Интерфейс должен быть интуитивно понятным, с поддержкой русского языка.

---

## 3. Метрики производительности

| Метрика                                    | Целевое значение | Описание                                    |
| ------------------------------------------ | ---------------- | ------------------------------------------- |
| **Время отклика API**                      | ≤ 1 сек          | Среднее время ответа сервера на запрос      |
| **Время аутентификации**                   | ≤ 2 сек          | Авторизация пользователя с проверкой токена |
| **Доступность системы**                    | ≥ 99%            | Работа серверной части без простоев         |
| **Время загрузки чата**                    | ≤ 2 сек          | Отображение сообщений после открытия чата   |
| **Создание напоминания**                   | ≤ 2 сек          | Обработка данных и запись в базу            |
| **Обработка запроса к AI**                 | ≤ 25 сек         | Время получения рекомендаций от AI Engine   |
| **Количество одновременных пользователей** | ≥ 100            | Минимальная производственная нагрузка       |

---

## 4. Архитектурные принципы

1. **Архитектурный стиль** — клиент-сервер с REST API.

   - Клиент: Vue.js.
   - Сервер: Node.js (Express + TypeScript).
   - База данных: PostgreSQL & Redis.

2. **Слои системы:**

   - **Frontend (UI):** взаимодействие с пользователем, запросы к API, валидация данных.
   - **Backend (API Layer):** маршрутизация, логика, авторизация, валидация данных.
   - **Database Layer:** хранение пользователей, чатов, напоминаний.
   - **AI Layer (внешний сервис):** формирование рекомендаций подарков.

3. **Безопасность и управление сессиями**

   - JWT-токены для авторизации.
   - Шифрование паролей (bcrypt).
   - HTTPS для всех запросов.

4. **Масштабируемость**

   - Возможность горизонтального масштабирования серверов.
   - Поддержка контейнеризации (Docker).
   - Кэширование JWT через Redis.

5. **Принципы проектирования**
   - Разделение ответственности (SRP).
   - Использование асинхронных операций.
   - Модульность и возможность расширения.
   - Минимизация дублирования кода.
   - RESTful-навигация и единообразные ответы.
